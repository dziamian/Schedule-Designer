<div *ngIf="!loading && connectionStatus; else spinner" class="content">
    <mat-tab-group mat-align-tabs="center" 
        ([selectedIndex])="currentTabIndex"
        (selectedIndexChange)="OnTabChange($event)"
    >
        <mat-tab *ngFor="let label of tabLabels; let tabIndex = index" label="{{label}}">
            <ng-template matTabContent>
                <div class="tabContent">
                    <mat-slide-toggle checked="true" color="primary">Personal schedule</mat-slide-toggle>
                    <div class="board">
                        <div class="my-courses">
                            <div class="my-courses-header">Your courses</div>
                            <div class="my-courses-content"
                                cdkDropList
                                #myCoursesSlot="cdkDropList"
                                id="my-courses"
                                [cdkDropListData]="myCourses"
                                (cdkDropListDropped)="DropInMyCourses($event)"
                            >
                                <div *ngFor="let course of myCourses" class="course-field">
                                    <app-course 
                                        [course]="course"
                                        (start)="OnStartDragging($event)"
                                        (release)="OnReleaseDragging($event)"
                                    ></app-course>
                                </div>
                            </div>
                        </div>
                        <div class="schedule">
                            <div class="schedule-header">Schedule</div>
                            <div class="schedule-content" cdkScrollable>
                                <table>
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th *ngFor="let timeLabel of scheduleTimeLabels" not-empty>
                                                {{timeLabel}}
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let dayLabel of scheduleDayLabels; let dayIndex = index">
                                            <td>
                                                <b>{{dayLabel}}</b>
                                            </td>
                                            <td *ngFor="let timeLabel of scheduleTimeLabels; let timeIndex = index"
                                                cdkDropList
                                                #scheduleSlots="cdkDropList"
                                                id="{{dayIndex}},{{timeIndex}}"
                                                cdkDropListSortingDisabled
                                                [cdkDropListData]="schedule[dayIndex][timeIndex]"
                                                [cdkDropListEnterPredicate]="ScheduleSlotEnterPredicate"
                                                (cdkDropListDropped)="DropInSchedule($event, dayIndex, timeIndex)"
                                            >
                                                <div *ngFor="let course of schedule[dayIndex][timeIndex]" class="schedule-course-field">
                                                    <app-course 
                                                        [course]="course" 
                                                        (start)="OnStartDragging($event)"
                                                        (release)="OnReleaseDragging($event)"
                                                        (ctrlClick)="Reset(dayIndex, timeIndex, $event)" 
                                                        [ngClass]="{'not-grabbing': IsScheduleSlotDisabled(dayIndex, timeIndex)}"
                                                    ></app-course>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-template>
        </mat-tab>
    </mat-tab-group>
</div>
<ng-template #spinner>
    <mat-progress-spinner
        class="spinner"
        mode="indeterminate"
        diameter="40"
    ></mat-progress-spinner>
</ng-template>